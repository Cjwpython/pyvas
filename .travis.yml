language: python
python: "3.6"
sudo: true
env:
  matrix:
    - TOXENV=check
    - TOXENV=py27
    - TOXENV=py35
    - TOXENV=py36
    - TOXENV=pypy
install: "pip install tox-travis"
before_script: 
  - sudo apt-get install -y openssl build-essential xorg libssl-dev
  - wget http://download.gna.org/wkhtmltopdf/0.12/0.12.3/wkhtmltox-0.12.3_linux-generic-amd64.tar.xz
  - tar -xJf wkhtmltox-0.12.3_linux-generic-amd64.tar.xz
  - cd wkhtmltox
  - sudo chown root:root bin/wkhtmltopdf
  - sudo cp -r * /usr/
script: tox
after_failure:
  - more .tox/log/* | cat
  - more .tox/log/* | cat
before_cache:
  - rm -rf $HOME/.cache/pip/log
cache:
  directories:
    - $HOME/.cache/pip
notifications:
  email:
    on_failure: always
